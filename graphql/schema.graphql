type Query {
  getAppSettings: SettingsResponse @cacheControl(scope: PRIVATE)
  # Roles
  getRole(id: ID!): Role @cacheControl(scope: PRIVATE, maxAge: SHORT)
  listRoles: [Role] @cacheControl(scope: PRIVATE, maxAge: SHORT)
  # Features
  getFeaturesByModule(module: String!): Feature @settings(settingsType: "workspace") @cacheControl(scope: PRIVATE, maxAge: SHORT)
  listFeatures: [Feature] @settings(settingsType: "workspace") @cacheControl(scope: PRIVATE, maxAge: SHORT)
  # Profile
  getProfile(id: ID!): Profile @cacheControl(scope: PRIVATE)
  getProfileByRole(roleId: ID!): Profile @cacheControl(scope: PRIVATE)
  listProfiles: [Profile] @cacheControl(scope: PRIVATE, maxAge: SHORT)
  # User
  getUser(id: ID!): User @cacheControl(scope: PRIVATE)
  getUserByEmail(email: String!): User @cacheControl(scope: PRIVATE)
  listUsers: [User] @cacheControl(scope: PRIVATE, maxAge: SHORT)
  checkUserPermission: [String] @settings(settingsType: "workspace") @cacheControl(scope: PRIVATE, maxAge: SHORT) @withSession @withSender
}

type Mutation {
  saveAppSettings: MutationResponse @cacheControl(scope: PRIVATE)
  # Roles
  saveRole(id: ID, name: String!): MutationResponse @cacheControl(scope: PRIVATE)
  deleteRole(id: ID!): MutationResponse @cacheControl(scope: PRIVATE)
  # Profile
  saveProfile(roleId: ID!, features: [FeatureInput]!, scoped: Boolean = true): MutationResponse @cacheControl(scope: PRIVATE)
  deleteProfile(id: ID!): MutationResponse @cacheControl(scope: PRIVATE)
  # User
  saveUser(id: ID, profileId: ID!, userId: ID, canImpersonate: Boolean = false, name: String!, email: String!): MutationResponse @cacheControl(scope: PRIVATE)
  deleteUser(id: ID!, userId: ID): MutationResponse @cacheControl(scope: PRIVATE)
}

type User {
  id: ID
  profileId: ID!
  userId: String
  name: String!
  email: String!
  canImpersonate: Boolean
}

type Profile {
  id: ID
  features: [Feature]!
  roleId: ID!
  scoped: Boolean
}

input FeatureInput {
  id: ID
  module: String!
  features: [String]!
}

type Feature {
  module: String!
  name: String!
  features: [SingleFeature]!
}

type SingleFeature {
  label: String!
  value: String!
}

type Role {
  id: ID
  name: String!
}

type MutationResponse {
  id: String
  status: String
  message: String
}

type SettingsResponse {
  adminSetup: Data
}

scalar Data

